<!DOCTYPE html>
<html>
  <head>
    <!--Import Google Icon Font-->
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
    <!--Import materialize.css-->
    <link
      type="text/css"
      rel="stylesheet"
      href="css/materialize.min.css"
      media="screen,projection"
    />

    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <style type="text/css">
      .underlined {
        border-bottom: 3px solid currentColor;
      }
      .reproved {
        background-color: red;
      }
      .aproved {
        background-color: green;
      }
    </style>
  </head>

  <body>
    <div class="container">
      <div
        class="hero center card-panel materialize-red darken-4 white-text z-depth-3"
      >
        <h1 class="materialize-red-text text-lighten-3">
          Curso Javascript Completo
        </h1>
      </div>
      <h2 class="materialize-red-text text-lighten-2 underlined">
        Dados de Alunos
      </h2>

      <table>
        <thead>
          <tr>
            <th>Nome</th>
            <th aluno-nota="n1">Nota 1</th>
            <th aluno-nota="n2">Nota 2</th>
            <th aluno-nota="n3">Nota 3</th>
            <th aluno-nota="n4">Nota 4</th>
            <th aluno-nota="media">MÃ©dia</th>
          </tr>
        </thead>

        <tbody></tbody>
      </table>
    </div>

    <!--JavaScript at end of body for optimized loading-->
    <!-- <script type="text/javascript" src="js/materialize.min.js"></script> -->
    <script src="js/calc.js"></script>

    <script>
      (function () {
        const students = [
          { name: 'Daniel', notes: [10, 3, 7.5, 3] },
          { name: 'Maria', notes: [10, 3, 7.5, 3] },
          { name: 'Rafael', notes: [10, 3, 7.5, 3] },
          { name: 'Catarine', notes: [1, 3, 7.5, 3] },
          { name: 'Jose', notes: [10, 3, 7.5, 3] },
          { name: 'John', notes: [10, 3, 7.5, 3] },
          { name: 'CataBunda', notes: [4.5, 3, 7.5, 3] },
          { name: 'Mindu', notes: [3, 3, 7.5, 3] },
          { name: 'Nariga', notes: [2, 3, 7.5, 3] },
          { name: 'Alice', notes: [4.5, 3, 7.5, 3] },
        ];
        students.forEach((student) => {
          student.averageNotes = average(...student.notes);
          console.log(student.averageNotes);
        });

        let html = students
          .map(
            (student, index) =>
              `
          <tr class=${student.averageNotes < 5 ? 'reproved' : 'aproved'}>
            <td>${student.name}</td>
            ${student.notes.map((n) => `<td> ${n} </td>`).join('')}
            <td>${student.averageNotes}</td>
          </tr>
          `
          )
          .join('');

        document.querySelector('tbody').innerHTML = html;
      })();
    </script>
  </body>
</html>
